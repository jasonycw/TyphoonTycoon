// Detect the coordinates in the map is land or ocean
define([
	'jquery'
],function($) {
	"use strict";

	var MapHitArea = (function() {
		var canvas;
		var ctx;

		function initCanvas() {
			canvas = $('#back-canvas')[0];
			ctx = canvas.getContext && canvas.getContext('2d');
			if (!ctx) {
				throw 'Cannot get the canvas context';
			}
		}

		function initHitAreaImg() {
			var hitareaImg = new Image();
			//hitareaImg.crossOrigin = '';	//fix Cross-Origin Resource Sharing policy issue 
											// or store the image as Data URI
			hitareaImg.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA8AAAAJYCAIAAAAi9hhWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NDA5NEI2RUI4NDlFMzExQjFBMDg0NEM2OERDOEU5OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQ0M5Rjk4QjQ5QkExMUUzQTJDNzkyODExRTUzNDREMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEQ0M5Rjk4QTQ5QkExMUUzQTJDNzkyODExRTUzNDREMSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc1MDk0QjZFQjg0OUUzMTFCMUEwODQ0QzY4REM4RTk5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjc0MDk0QjZFQjg0OUUzMTFCMUEwODQ0QzY4REM4RTk5Ii8+IDwvcmRmOkRlc2NyaXB0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";
			hitareaImg.onload = function() {
				ctx.drawImage(hitareaImg, 0, 0);
			}
		}

		return {
			init: function() {
				initCanvas();
				initHitAreaImg();
			},
			isLand: function(x, y) {
				// Check either one color channel is okay as we only have 
				// black (0, 0, 0) and white pixels (255, 255, 255) on canvas
				var red = ctx.getImageData(x, y, 1, 1).data[0];
				if (red == 255) {
					return true;
				} else {
					return false;
				}
			}
		};
	})();

	return MapHitArea;
});